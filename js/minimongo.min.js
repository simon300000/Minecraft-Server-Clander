require=function e(t,n,r){function i(u,a){if(!n[u]){if(!t[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(o)return o(u,!0);throw new Error("Cannot find module '"+u+"'")}var s=n[u]={exports:{}};t[u][0].call(s.exports,function(e){var n=t[u][1][e];return i(n?n:e)},s,s.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({"Focm2+":[function(e,t,n){n.MemoryDb=e("./lib/MemoryDb"),n.utils=e("./lib/utils")},{"./lib/MemoryDb":6,"./lib/utils":8}],minimongo:[function(e,t){t.exports=e("Focm2+")},{}],jquery:[function(e,t){t.exports=e("/nayFu")},{}],"/nayFu":[function(e,t){t.exports=window.$},{}],5:[function(e,t){var n=e("lodash");EJSON={};var r={};EJSON.addType=function(e,t){if(n.has(r,e))throw new Error("Type "+e+" already present");r[e]=t};var i=[{matchJSONValue:function(e){return n.has(e,"$date")&&1===n.size(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return n.has(e,"$binary")&&1===n.size(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&n.has(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:EJSON._base64Encode(e)}},fromJSONValue:function(e){return EJSON._base64Decode(e.$binary)}},{matchJSONValue:function(e){return n.has(e,"$escape")&&1===n.size(e)},matchObject:function(e){return n.isEmpty(e)||n.size(e)>2?!1:n.any(i,function(t){return t.matchJSONValue(e)})},toJSONValue:function(e){var t={};return n.each(e,function(e,n){t[n]=EJSON.toJSONValue(e)}),{$escape:t}},fromJSONValue:function(e){var t={};return n.each(e.$escape,function(e,n){t[n]=EJSON.fromJSONValue(e)}),t}},{matchJSONValue:function(e){return n.has(e,"$type")&&n.has(e,"$value")&&2===n.size(e)},matchObject:function(e){return EJSON._isCustomType(e)},toJSONValue:function(e){return{$type:e.typeName(),$value:e.toJSONValue()}},fromJSONValue:function(e){var t=e.$type,n=r[t];return n(e.$value)}}];EJSON._isCustomType=function(e){return e&&"function"==typeof e.toJSONValue&&"function"==typeof e.typeName&&n.has(r,e.typeName())};var o=EJSON._adjustTypesToJSONValue=function(e){if(null===e)return null;var t=u(e);return void 0!==t?t:(n.each(e,function(t,n){if("object"==typeof t||void 0===t){var r=u(t);return r?(e[n]=r,void 0):(o(t),void 0)}}),e)},u=function(e){for(var t=0;t<i.length;t++){var n=i[t];if(n.matchObject(e))return n.toJSONValue(e)}return void 0};EJSON.toJSONValue=function(e){var t=u(e);return void 0!==t?t:("object"==typeof e&&(e=EJSON.clone(e),o(e)),e)};var a=EJSON._adjustTypesFromJSONValue=function(e){if(null===e)return null;var t=c(e);return t!==e?t:(n.each(e,function(t,n){if("object"==typeof t){var r=c(t);if(t!==r)return e[n]=r,void 0;a(t)}}),e)},c=function(e){if("object"==typeof e&&null!==e&&n.size(e)<=2&&n.all(e,function(e,t){return"string"==typeof t&&"$"===t.substr(0,1)}))for(var t=0;t<i.length;t++){var r=i[t];if(r.matchJSONValue(e))return r.fromJSONValue(e)}return e};EJSON.fromJSONValue=function(e){var t=c(e);return t===e&&"object"==typeof e?(e=EJSON.clone(e),a(e),e):t},EJSON.stringify=function(e){return JSON.stringify(EJSON.toJSONValue(e))},EJSON.parse=function(e){return EJSON.fromJSONValue(JSON.parse(e))},EJSON.isBinary=function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill},EJSON.equals=function(e,t,r){var i,o=!(!r||!r.keyOrderSensitive);if(e===t)return!0;if(!e||!t)return!1;if("object"!=typeof e||"object"!=typeof t)return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(EJSON.isBinary(e)&&EJSON.isBinary(t)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}if("function"==typeof e.equals)return e.equals(t,r);if(e instanceof Array){if(!(t instanceof Array))return!1;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!EJSON.equals(e[i],t[i],r))return!1;return!0}var u;if(o){var a=[];return n.each(t,function(e,t){a.push(t)}),i=0,u=n.all(e,function(e,n){return i>=a.length?!1:n!==a[i]?!1:EJSON.equals(e,t[a[i]],r)?(i++,!0):!1}),u&&i===a.length}return i=0,u=n.all(e,function(e,o){return n.has(t,o)?EJSON.equals(e,t[o],r)?(i++,!0):!1:!1}),u&&n.size(t)===i},EJSON.clone=function(e){var t;if("object"!=typeof e)return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(EJSON.isBinary(e)){t=EJSON.newBinary(e.length);for(var r=0;r<e.length;r++)t[r]=e[r];return t}if(n.isArray(e)||n.isArguments(e)){for(t=[],r=0;r<e.length;r++)t[r]=EJSON.clone(e[r]);return t}return"function"==typeof e.clone?e.clone():(t={},n.each(e,function(e,n){t[n]=EJSON.clone(e)}),t)},t.exports=EJSON},{lodash:"nJZoxB"}],6:[function(e,t){var n,r,i,o,u,a,c,s=[].slice;c=e("lodash"),a=e("./utils"),u=e("./utils").processFind,o=e("./utils").processAggregate,i=e("./selector").compileSort,t.exports=r=function(){function e(e,t){this.collections={},t&&t(this)}return e.prototype.addCollection=function(e){var t;return t=new n(e),this[e]=t,this.collections[e]=t},e.prototype.createCollection=function(e){var t;return t=new n(e),this[e]=t,this.collections[e]=t},e.prototype.removeCollection=function(e){return delete this[e],delete this.collections[e]},e}(),n=function(){function e(e){this.name=e,this.items={},this.founds={},this.updates={},this.upserts={},this.removes={}}return e.prototype.find=function(e,t){return this._findFetch(e,t)},e.prototype.findOne=function(e,t){var n;return n=this.find(e,t),n?n[0]:null},e.prototype._findFetch=function(e,t){return u(this.items,e,t)},e.prototype.upsert=function(e,t){var n,r,i,o,u;for(r=a.regularizeUpsert(e,t)[0],u=[],i=0,o=r.length;o>i;i++)n=r[i],void 0===n.base&&(n.base=this.upserts[n.doc._id]?this.upserts[n.doc._id].base:this.items[n.doc._id]||null),n=c.cloneDeep(n),this.items[n.doc._id]=n.doc,u.push(this.upserts[n.doc._id]=n);return u},e.prototype.insert=function(e,t){var n,r,i,o;if(c.isEmpty(e)&&"object"!=typeof e||"string"==typeof e)throw{message:"Error: no object passed to insert"};for(r=a.regularizeUpsert(e,t)[0],i=0,o=r.length;o>i;i++){if(n=r[i],void 0===n.base&&(n.base=this.items[n.doc._id]||null),n=c.cloneDeep(n),this.items[n.doc._id])throw"Duplicate ID";this.items[n.doc._id]=n.doc}return null},e.prototype.update=function(e,t,n){var r,i;if(c.isEmpty(e)&&c.isEmpty(t)&&"object"!=typeof e&&"object"!=typeof t||!t)throw{message:"Error: no object passed to update"};return i=u(this.items,e),r=this,c.map(i,function(e){return r.founds[e._id]=t}),c.isEmpty(t)?void 0:a.processUpdate(i,e,t,n,this)},e.prototype.aggregate=function(){var e,t,n,r,i;if(n=1<=arguments.length?s.call(arguments,0):[],e=[],n.length>1){for(r=0,i=n.length;i>r;r++)t=n[r],e.push(t);n=e}else n=n[0];return o(this.items,n)},e.prototype.remove=function(e,t){var n,r,i,o,a,s;for(n=u(this.items,e,t),i=c.collect(n,"_id"),s=[],o=0,a=i.length;a>o;o++)r=i[o],this.removes[r]=this.items[r],s.push(this.items=c.omit(this.items,r));return s},e.prototype.cache=function(e,t,n,r,o){var u,a,s,f,l;for(f=0,l=e.length;l>f;f++)u=e[f],this.cacheOne(u);return a=c.object(c.pluck(e,"_id"),e),n.sort&&(s=i(n.sort)),this.find(t,n).fetch(function(t){return function(i){var o,u,f;for(u=0,f=i.length;f>u;u++)if(o=i[u],!a[o._id]&&!c.has(t.upserts,o._id)){if(n.sort&&n.limit&&e.length===n.limit&&s(o,c.last(e))>=0)continue;delete t.items[o._id]}return null!=r?r():void 0}}(this),o)},e.prototype.pendingUpserts=function(e){return e(c.values(this.upserts))},e.prototype.pendingRemoves=function(e){return e(c.pluck(this.removes,"_id"))},e.prototype.resolveUpserts=function(e,t){var n,r,i,o;for(i=0,o=e.length;o>i;i++)r=e[i],n=r.doc._id,this.upserts[n]&&(c.isEqual(r.doc,this.upserts[n].doc)?delete this.upserts[n]:this.upserts[n].base=r.doc);return null!=t?t():void 0},e.prototype.resolveRemove=function(e,t){return delete this.removes[e],null!=t?t():void 0},e.prototype.seed=function(e,t){var n,r,i;for(c.isArray(e)||(e=[e]),r=0,i=e.length;i>r;r++)n=e[r],c.has(this.items,n._id)||c.has(this.removes,n._id)||(this.items[n._id]=n);return null!=t?t():void 0},e.prototype.cacheOne=function(e,t){var n;return c.has(this.upserts,e._id)||c.has(this.removes,e._id)||(n=this.items[e._id],(!n||!e._rev||!n._rev||e._rev>=n._rev)&&(this.items[e._id]=e)),null!=t?t():void 0},e}()},{"./selector":7,"./utils":8,lodash:"nJZoxB"}],7:[function(e,t,n){LocalCollection={},EJSON=e("./EJSON");var r=e("lodash"),i=function(e){return r.isArray(e)&&!EJSON.isBinary(e)},o=function(e,t){return i(e)?r.any(e,t):t(e)},u=function(e,t){return t(e)?!0:i(e)&&r.any(e,t)},a=function(e){var t=void 0;for(var n in e){var r="$"===n.substr(0,1);if(void 0===t)t=r;else if(t!==r)throw new Error("Inconsistent selector: "+e)}return!!t},c=function(e){if(null==e)return function(e){return o(e,function(e){return null==e})};if(!r.isObject(e))return function(t){return o(t,function(t){return t===e})};if(e instanceof RegExp)return function(t){return void 0===t?!1:o(t,function(t){return e.test(t)})};if(i(e))return function(t){return i(t)?u(t,function(t){return LocalCollection._f._equal(e,t)}):!1};if(a(e)){var t=[];return r.each(e,function(n,i){if(!r.has(f,i))throw new Error("Unrecognized operator: "+i);t.push(f[i](n,e.$options))}),function(e){return r.all(t,function(t){return t(e)})}}return function(t){return o(t,function(t){return LocalCollection._f._equal(e,t)})}},s={$and:function(e){if(!i(e)||r.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var t=r.map(e,l);return function(e){return r.all(t,function(t){return t(e)})}},$or:function(e){if(!i(e)||r.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var t=r.map(e,l);return function(e){return r.any(t,function(t){return t(e)})}},$nor:function(e){if(!i(e)||r.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var t=r.map(e,l);return function(e){return r.all(t,function(t){return!t(e)})}},$where:function(e){return e instanceof Function||(e=Function("return "+e)),function(t){return e.call(t)}}},f={$group:function(e){if(!i(e))throw new Error("Argument to $in must be array");return function(t){return u(t,function(t){return r.any(e,function(e){return LocalCollection._f._equal(e,t)})})}},$match:function(e){if(!i(e))throw new Error("Argument to $in must be array");return function(t){return u(t,function(t){return r.any(e,function(e){return LocalCollection._f._equal(e,t)})})}},$in:function(e){if(!i(e))throw new Error("Argument to $in must be array");return function(t){return u(t,function(t){return r.any(e,function(e){return LocalCollection._f._equal(e,t)})})}},$all:function(e){if(!i(e))throw new Error("Argument to $all must be array");return function(t){return i(t)?r.all(e,function(e){return r.any(t,function(t){return LocalCollection._f._equal(e,t)})}):!1}},$lt:function(e){return function(t){return o(t,function(t){return LocalCollection._f._cmp(t,e)<0})}},$lte:function(e){return function(t){return o(t,function(t){return LocalCollection._f._cmp(t,e)<=0})}},$gt:function(e){return function(t){return o(t,function(t){return LocalCollection._f._cmp(t,e)>0})}},$gte:function(e){return function(t){return o(t,function(t){return LocalCollection._f._cmp(t,e)>=0})}},$ne:function(e){return function(t){return!u(t,function(t){return LocalCollection._f._equal(t,e)})}},$nin:function(e){if(!i(e))throw new Error("Argument to $nin must be array");var t=f.$in(e);return function(e){return void 0===e?!0:!t(e)}},$exists:function(e){return function(t){return e===(void 0!==t)}},$mod:function(e){var t=e[0],n=e[1];return function(e){return o(e,function(e){return e%t===n})}},$size:function(e){return function(t){return i(t)&&e===t.length}},$type:function(e){return function(t){return void 0===t?!1:o(t,function(t){return LocalCollection._f._type(t)===e})}},$regex:function(e,t){if(void 0!==t){if(/[^gim]/.test(t))throw new Error("Only the i, m, and g regexp options are supported");var n=e instanceof RegExp?e.source:e;e=new RegExp(n,t)}else e instanceof RegExp||(e=new RegExp(e));return function(t){return void 0===t?!1:o(t,function(t){return e.test(t)})}},$options:function(){return function(){return!0}},$elemMatch:function(e){if(r.isEmpty(e))return function(){return!1};var t=l(e);return function(e){return i(e)?r.any(e,function(e){return t(e)}):!1}},$not:function(e){var t=c(e);return function(e){return!t(e)}},$near:function(){return function(){return!0}},$geoIntersects:function(){return function(){return!0}}};LocalCollection._f={_type:function(e){return"number"==typeof e?1:"string"==typeof e?2:"boolean"==typeof e?8:i(e)?4:null===e?10:e instanceof RegExp?11:"function"==typeof e?13:e instanceof Date?9:EJSON.isBinary(e)?5:3},_equal:function(e,t){return EJSON.equals(e,t,{keyOrderSensitive:!0})},_typeorder:function(e){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][e]},_cmp:function(e,t){if("object"==typeof e)return-1;if(void 0===e)return void 0===t?0:-1;if(void 0===t)return 1;var n=LocalCollection._f._type(e),r=LocalCollection._f._type(t),i=LocalCollection._f._typeorder(n),o=LocalCollection._f._typeorder(r);if(i!==o)return o>i?-1:1;if(n!==r)throw Error("Missing type coercion logic in _cmp");if(7===n&&(n=r=2,e=e.toHexString(),t=t.toHexString()),9===n&&(n=r=1,e=e.getTime(),t=t.getTime()),1===n)return e-t;if(2===r)return t>e?-1:e===t?0:1;if(3===n){var u=function(e){var t=[];for(var n in e)t.push(n),t.push(e[n]);return t};return LocalCollection._f._cmp(u(e),u(t))}if(4===n)for(var a=0;;a++){if(a===e.length)return a===t.length?0:-1;if(a===t.length)return 1;var c=LocalCollection._f._cmp(e[a],t[a]);if(0!==c)return c}if(5===n){if(e.length!==t.length)return e.length-t.length;for(a=0;a<e.length;a++){if(e[a]<t[a])return-1;if(e[a]>t[a])return 1}return 0}if(8===n)return e?t?0:1:t?-1:0;if(10===n)return 0;if(11===n)throw Error("Sorting not supported on regular expression");if(13===n)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},LocalCollection._matches=function(e,t){return LocalCollection._compileSelector(e)(t)},LocalCollection._makeLookupFunction=function(e){var t,n,o,u=e.indexOf(".");if(-1===u)t=e;else{t=e.substr(0,u);var a=e.substr(u+1);n=LocalCollection._makeLookupFunction(a),o=/^\d+(\.|$)/.test(a)}return function(e){if(null==e)return[void 0];var u=e[t];return n?i(u)&&0===u.length?[void 0]:((!i(u)||o)&&(u=[u]),Array.prototype.concat.apply([],r.map(u,n))):[u]}};var l=function(e){var t=[];return r.each(e,function(e,n){if("$"===n.substr(0,1))if(r.has(f,n))t.push(f[n](e));else{if(!r.has(s,n))throw new Error("Unrecognized logical operator: "+n);t.push(s[n](e))}else{var i=LocalCollection._makeLookupFunction(n),o=c(e);t.push(function(e){var t=i(e);return r.any(t,o)})}}),function(e){return r.all(t,function(t){return t(e)})}};LocalCollection._compileSelector=function(e){if(e instanceof Function)return function(t){return e.call(t)};if(LocalCollection._selectorIsId(e))return function(t){return EJSON.equals(t._id,e)};if(!e||"_id"in e&&!e._id)return function(){return!1};if("boolean"==typeof e||i(e)||EJSON.isBinary(e))throw new Error("Invalid selector: "+e);return l(e)},LocalCollection._compileSort=function(e){var t=[];if(e instanceof Array)for(var n=0;n<e.length;n++)"string"==typeof e[n]?t.push({lookup:LocalCollection._makeLookupFunction(e[n]),ascending:!0}):t.push({lookup:LocalCollection._makeLookupFunction(e[n][0]),ascending:"desc"!==e[n][1]});else{if("object"!=typeof e)throw Error("Bad sort specification: ",JSON.stringify(e));for(var o in e)t.push({lookup:LocalCollection._makeLookupFunction(o),ascending:e[o]>=0})}if(0===t.length)return function(){return 0};var u=function(e,t){var n,o=!0;return r.each(e,function(e){i(e)||(e=[e]),i(e)&&0===e.length&&(e=[void 0]),r.each(e,function(e){if(o)n=e,o=!1;else{var r=LocalCollection._f._cmp(n,e);(t&&r>0||!t&&0>r)&&(n=e)}})}),n};return function(e,n){for(var r=0;r<t.length;++r){var i=t[r],o=u(i.lookup(e),i.ascending),a=u(i.lookup(n),i.ascending),c=LocalCollection._f._cmp(o,a);if(0!==c)return i.ascending?c:-c}return 0}},n.compileDocumentSelector=l,n.compileSort=LocalCollection._compileSort},{"./EJSON":5,lodash:"nJZoxB"}],8:[function(e,t,n){var r,i,o,u,a,c,s,f,l,p,d,h,m;m=e("lodash"),o=e("async"),u=e("bowser"),r=e("sorted-object-array"),a=e("./selector").compileDocumentSelector,c=e("./selector").compileSort,l=function(){var e;if(!window.localStorage)return!1;try{return window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),!0}catch(t){return e=t,!1}},n.compileDocumentSelector=a,n.autoselectLocalDb=function(t,n){var r,i;return r=e("./MemoryDb"),i=u.browser,new r(t,n)},n.migrateLocalDb=function(){},n.processUpdate=function(e,t,r,i,o){var u,a,c,s,f,l,p,d,h;for(i&&i.upsert&&e.length<1&&(m.include(Object.keys(r),"$set")?o.insert(m.merge(t,r.$set)):Object.keys(r)[0].indexOf("$")>=0?o.insert(m.merge(t,r[Object.keys(r)[0]])):o.insert(m.merge(t,r)),o.upserts[r._id]=r),i&&i.multi||e.length<1||(e=[m.first(e)]),l=0,p=e.length;p>l;l++){if(c=e[l],void 0===c.docs&&(c.doc=r),void 0===c.base&&(c.base=o.items[c.doc._id]||null),c=m.cloneDeep(c),u=!0,m.include(Object.keys(r),"$inc")){u=!1,o.updates[c._id]=r,d=r.$inc;for(s in d)f=d[s],o.items[c._id][s]=o.items[c._id][s]+f}if(m.include(Object.keys(r),"$set")&&(u=n.update$set(t,o,r,c)),m.include(Object.keys(r),"$unset")&&(u=n.update$unset(o,r,c)),m.include(Object.keys(r),"$rename")){o.updates[c._id]=r,u=!1,h=r.$rename;for(s in h)f=h[s],o.items[c._id][f]=o.items[c._id][s],o.items[c._id]=m.omit(o.items[c._id],s)}if(m.include(Object.keys(r),"$max")&&(u=n.update$max(o,r,c)),m.include(Object.keys(r),"$min")&&(u=n.update$min(o,r,c)),m.include(Object.keys(r),"$mul")&&(u=n.update$mul(o,r,c)),m.include(Object.keys(r),"$addToSet")&&(u=n.update$addToSet(o,r,c)),m.include(Object.keys(r),"$push")&&(u=n.update$push(o,r,c)),u){o.updates[c._id]=r;for(s in r)f=r[s],a=o.items[c._id]._id,o.items[c._id]=r;o.items[c._id]._id=a}}return""},n.update$push=function(e,t,n){var r,i,o,u,a;r=!1,i=!1,a=t.$push;for(o in a)u=a[o],e.items[n._id][o]&&(i=!0,e.items[n._id][o].push(u));return i&&(e.updates[n._id]=t),r},n.update$addToSet=function(e,t,n){var r,i,o,u,a;r=!1,i=!1,a=t.$addToSet;for(o in a)u=a[o],e.items[n._id][o]&&!m.include(e.items[n._id][o],u)&&(i=!0,e.items[n._id][o].push(u));return i&&(e.updates[n._id]=t),r},n.update$unset=function(e,t,n){var r,i,o,u,a;r=!1,i=!1,a=t.$unset;for(o in a)u=a[o],e.items[n._id][o]&&(i=!0),e.items[n._id]=m.omit(e.items[n._id],o);return i&&(e.updates[n._id]=t),r},n.update$set=function(e,t,n,r){var i,o,u,a,c,s,f;t.updates[r._id]=n,o=!1,f=n.$set;for(a in f)if(s=f[a],c=a.split("."),"$"===c[c.length-1])i=t.items[r._id][c[0]],u=i.indexOf(m.values(e)[0]),t.items[r._id][c[0]][u]=m.values(n.$set)[0];else if(isNaN(c[c.length-1])){if(!t.items[r._id][a]&&m.include(a,"$"))throw{message:"The dollar ($) prefixed field "+a+" in "+a+" is not valid for storage."};t.items[r._id][a]=s}else i=t.items[r._id][c[0]],u=parseInt(c[c.length-1]),t.items[r._id][c[0]][u]=s;return o},n.update$max=function(e,t,r){var i,o,u,a,c,s,f;o=!1,u=!1,f=t.$max;for(a in f)if(s=f[a],m.include(a,"."))c=n.prepareDot(a),i=n.convertDot(r,c[0])[c[1]],s>i&&(n.convertDot(r,c[0])[c[1]]=s,e.items[r._id]=m.omit(r,"doc","base"),u=!0);else{if(!e.items[r._id][a]&&m.include(a,"$"))throw{message:"The dollar ($) prefixed field "+a+" in "+a+" is not valid for storage."};e.items[r._id][a]<s&&(e.items[r._id][a]=s,u=!0)}return u&&(e.updates[r._id]=t),o},n.update$min=function(e,t,r){var i,o,u,a,c,s,f;e.updates[r._id]=t,o=!1,u=!1,f=t.$min;for(a in f)if(s=f[a],m.include(a,"."))c=n.prepareDot(a),i=n.convertDot(r,c[0])[c[1]],i>s&&(n.convertDot(r,c[0])[c[1]]=s,e.items[r._id]=m.omit(r,"doc","base"),u=!0);else{if(!e.items[r._id][a]&&m.include(a,"$"))throw{message:"The dollar ($) prefixed field "+a+" in "+a+" is not valid for storage."};e.items[r._id][a]>s&&(e.items[r._id][a]=s,u=!0)}return u&&(e.updates[r._id]=t),o},n.update$mul=function(e,t,r){var i,o,u,a,c;e.updates[r._id]=t,i=!1,c=t.$mul;for(o in c)if(a=c[o],m.include(o,"."))u=n.prepareDot(o),n.convertDot(r,u[0])[u[1]]=n.convertDot(r,u[0])[u[1]]*a,e.items[r._id]=m.omit(r,"doc","base");else{if(!e.items[r._id][o]&&m.include(o,"$"))throw{message:"The dollar ($) prefixed field "+o+" in "+o+" is not valid for storage."};e.items[r._id][o]=e.items[r._id][o]*a}return i},n.prepareDot=function(e){var t,n,r;return t=e.split("."),n=t.pop(),r=t.join("."),[r,n]},n.convertDot=function(e,t,r){return"string"==typeof t?n.convertDot(e,t.split("."),r):1===t.length&&void 0!==r?e[t[0]]=r:0===t.length?e:n.convertDot(e[t[0]],t.slice(1),r)},n.processFind=function(e,t,r){var o,u;return m.isArray(t)?[]:(o=m.filter(m.values(e),a(t)),o=h(t,o),o=d(t,o),o=r?n.filterFields(o,r):m.map(o,function(e){return m.cloneDeep(e)}),u=o,o.skip=function(e){var t;return u.preLimit?(u.preLimit.splice(0,e),t=u.preLimit):(u.splice(0,e),t=u),i(t)},o.limit=function(e){var t;return t=i(u.slice(0,e)),t.preLimit=o,t},o.sort=function(e){var t,n;if(t=e[Object.keys(e)[0]],n=i(m.sortBy(u,Object.keys(e)[0])),-1===t)n=n.reverse();else{if(1!==t&&!m.isEmpty(Object.keys(e)))throw{message:"BadValue bad sort specification"};n=n}return n},o.count=function(){return m.size(u)},o)},i=function(e){var t;return t=e,t.skip=function(e){var n;return t.preLimit?(t.preLimit.splice(0,e),n=t.preLimit):(t.splice(0,e),n=t),i(n)},t.limit=function(n){var r;return r=i(t.slice(0,n)),r.preLimit=e,r},t.sort=function(e){var n,r;return n=e[Object.keys(e)[0]],r=i(m.sortBy(t,Object.keys(e)[0])),0>n&&(r=r.reverse()),r},e.count=function(){return m.size(t)},t},n.convertToObject=function(e){var t,n,r,i,o;if(e.constructor!==Array)return e;for(n={},i=0,o=e.length;o>i;i++)r=e[i],t=Object.keys(r)[0],n[t]=r[t];return n},n.aggregateGroup=function(e,t,r){var i,o,u,a,c,s,f,l,p,d,h,v,y,g,b,_,$,w;if(l=[],y=e,c=m.keys(r.$group),p=m.values(r.$group),v=null,!m.include(c,"_id"))throw{message:"_id field was not supplied"};if("string"==typeof r.$group._id&&"$"===r.$group._id.trim())throw{message:"'$' by itself is not a valid FieldPath"};for(h=0,_=y.length;_>h;h++)for(a=y[h],o={},i=0,g=0,$=c.length;$>g;g++){if(u=c[g],"string"==typeof p[i]){for("_id"===u&&(v=p[i].replace("$","")),o[u]=n.compileDollar(a,p[i]),f=!1,b=0,w=l.length;w>b;b++)d=l[b],m.include(m.values(d),o._id)&&(f=!0);f||l.push(o)}else{if("object"!=typeof p[i])return[{_id:p[i]}];s=Object.keys(p[i])[0],"$max"===s&&n.aggregateMax(p,l,y,i,v,u),"$min"===s&&n.aggregateMin(p,l,y,i,v,u),"$sum"===s?n.aggregateAdd(p,l,y,i,v,u):"$avg"===s&&n.aggregateAvg(p,l,y,i,v,u)}i+=1}return e=l},n.compileDollar=function(e,t){var n;return m.include(t,"$")?m.include(t,".")?(n=t.replace("$","").split("."),e[n[0]][n[1]]):e[t.replace("$","")]:t},n.processOperation=function(e,t){var n,r,i;if("number"==typeof t)return t;if(m.include(t,".")){if(r=t.replace("$","").split("."),!e[r[0]])return null;i=e[r[0]][r[1]]}else m.include(t,"$")&&(i=e[t.replace("$","")]||e[t]);return"object"==typeof i?(n=t.replace("$","").split("."),e[t][n[1]]):"string"==typeof i||"number"==typeof i?i:void 0},n.aggregateMax=function(e,t,r,i,o,u){var a,c,s,f,l,p,d,h,m,v;for(f=Object.keys(e[i]),l=e[i][f],v=[],p=0,h=t.length;h>p;p++){for(a=t[p],s=0,d=0,m=r.length;m>d;d++)c=r[d],n.checkIfMatch(a,c,o,l)&&s<n.processOperation(c,l)&&(s=n.processOperation(c,l));v.push(a[u]=s)}return v},n.aggregateMin=function(e,t,r,i,o,u){var a,c,s,f,l,p,d,h,m,v;for(f=Object.keys(e[i]),l=e[i][f],v=[],p=0,h=t.length;h>p;p++){for(a=t[p],s=null,d=0,m=r.length;m>d;d++)c=r[d],n.checkIfMatch(a,c,o,l)&&(s||(s=n.processOperation(c,l)),s>n.processOperation(c,l)&&(s=n.processOperation(c,l)));v.push(a[u]=s)}return v},n.aggregateAdd=function(e,t,r,i,o,u){var a,c,s,f,l,p,d,h,m,v;for(s=Object.keys(e[i]),l=e[i][s],v=[],p=0,h=t.length;h>p;p++){for(a=t[p],f=0,d=0,m=r.length;m>d;d++)c=r[d],n.checkIfMatch(a,c,o,l)&&(f+=n.processOperation(c,l));v.push(a[u]=f)}return v},n.aggregateAvg=function(e,t,r,i,o,u){var a,c,s,f,l,p,d,h,m,v;for(f=Object.keys(e[i]),p=e[i][f],d=0,m=t.length;m>d;d++){for(a=t[d],l=0,s=0,h=0,v=r.length;v>h;h++)c=r[h],n.checkIfMatch(a,c,o,p)&&(l+=n.processOperation(c,p),s+=1);1>l&&(s=1),a[u]=l/s}return t},n.aggregateSort=function(e,t){var n,r,i;return r=e.$sort[Object.keys(e.$sort)[0]],i=Object.keys(e.$sort)[0].replace("$",""),n=function(e,t){return e[i]<t[i]?-1:e[i]>t[i]?1:0},t=t.sort(n),0>r&&(t=t.reverse()),t},n.checkIfMatch=function(e,t,r,i){return e._id===n.processOperation(t,r)||r===e._id||t[r]===e._id&&("number"==typeof i||m.include(i,"$"))},n.aggregateProject=function(e,t){var n,r,i,o,u,a,c,s,f,l,p,d,h,m;for(u=Object.keys(e.$project),i=[],s=0,p=u.length;p>s;s++)r=u[s],e.$project[r]&&i.push(r);for(e.$project._id&&i.push("_id"),m=[],f=0,d=t.length;d>f;f++){for(n=t[f],c={},l=0,h=i.length;h>l;l++)o=i[l],a=o.replace("$",""),n[o]||n[a]?n[a]&&(c[a]=n[a]):(r=o.split("."),c[r[0]]=n[r[0]]);m.push(c)}return t=m},n.throwPipelineOperators=function(e){if(m.intersection(["$match","$project","$group","$limit","$sort","$skip"],Object.keys(e)).length<1)throw m.intersection(["match","project","group","limit","sort","skip"],Object.keys(e)).length>0?{message:"The pipeline operator "+Object.keys(e)[0]+" requires a $ in front."}:{message:"This pipeline operator is not supported with this browser version of MongoDB"}},n.processAggregate=function(e,t,r){var i,o,u,c;for(m.isArray(t)||(t=[t]),i=m.values(e),u=0,c=t.length;c>u;u++)o=t[u],n.throwPipelineOperators(o),o.$match&&(i=m.filter(i,a(o.$match))),o.$project&&(i=n.aggregateProject(o,i)),o.$group&&(i=n.aggregateGroup(i,e,o,r)),o.$limit&&(i=i.slice(0,o.$limit)),o.$sort&&(i=n.aggregateSort(o,i)),o.$skip&&i.splice(0,o.$skip);return i},n.filterFields=function(e,t){return null==t&&(t={}),0===m.keys(t).length?e:m.map(e,function(e){var n,r,i,o,u,a,c,s,f,l,p,d,h,v,y,g,b,_,$,w,k;if(e=m.cloneDeep(e),o={},m.include(m.values(t),1)||m.include(m.values(t),!0)){for(m.include(m.keys(t),"_id")&&!t._id?(n=m.keys(t),t._id=!1):(n=m.keys(t).concat(["_id"]),t._id=!0),f=0,h=n.length;h>f;f++){for(r=n[f],a=r.split("."),u=e,l=0,v=a.length;v>l;l++)c=a[l],u&&(u=u[c]);if(null!=u){for(i=e,s=o,$=m.initial(a),p=0,y=$.length;y>p;p++)c=$[p],s[c]=s[c]||{},s=s[c],i=i[c];t[r]&&(s[m.last(a)]=i[m.last(a)])}}return o}for(w=m.keys(t),d=0,g=w.length;g>d;d++){for(r=w[d],a=r.split("."),u=e,k=m.initial(a),_=0,b=k.length;b>_;_++)c=k[_],u&&(u=u[c]);null!=u&&delete u[m.last(a)]}return e})},n.createUid=function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;return t=16*Math.random()|0,n="x"===e?t:3&t|8,n.toString(16)})},h=function(e,t){var n,r,i,o;for(i in e)if(o=e[i],null!=o&&o.$near){if(r=o.$near.$geometry,"Point"!==r.type)break;t=m.filter(t,function(e){return e[i]&&"Point"===e[i].type}),n=m.map(t,function(e){return{doc:e,distance:f(r.coordinates[1],r.coordinates[0],e[i].coordinates[1],e[i].coordinates[0])}}),n=m.filter(n,function(e){return e.distance>=0}),n=m.sortBy(n,"distance"),o.$near.$maxDistance&&(n=m.filter(n,function(e){return e.distance<=o.$near.$maxDistance})),t=m.pluck(n,"doc")}return t},p=function(e,t){if(!m.isEqual(m.first(t.coordinates[0]),m.last(t.coordinates[0])))throw new Error("First must equal last");return e.coordinates[0]<Math.min.apply(this,m.map(t.coordinates[0],function(e){return e[0]}))?!1:e.coordinates[1]<Math.min.apply(this,m.map(t.coordinates[0],function(e){return e[1]}))?!1:e.coordinates[0]>Math.max.apply(this,m.map(t.coordinates[0],function(e){return e[0]}))?!1:e.coordinates[1]>Math.max.apply(this,m.map(t.coordinates[0],function(e){return e[1]}))?!1:!0},f=function(e,t,n,r){var i,o,u,a,c,f;return i=6370986,c=s(n-e),f=s(r-t),o=Math.sin(c/2)*Math.sin(c/2)+Math.cos(s(e))*Math.cos(s(n))*Math.sin(f/2)*Math.sin(f/2),u=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),a=i*u},s=function(e){return e*(Math.PI/180)},d=function(e,t){var n,r,i;for(r in e)if(i=e[r],null!=i&&i.$geoIntersects){if(n=i.$geoIntersects.$geometry,"Polygon"!==n.type)break;t=m.filter(t,function(e){return e[r]&&"Point"===e[r].type?p(e[r],n):!1})}return t},n.regularizeUpsert=function(e,t,r,i){var o,u,a,c,s;for(m.isFunction(t)&&(s=[void 0,t,r],t=s[0],r=s[1],i=s[2]),m.isArray(e)?t=t||[]:(e=[e],t=[t]),u=m.map(e,function(e,n){return{doc:e,base:n<t.length?t[n]:void 0}}),a=0,c=u.length;c>a;a++){if(o=u[a],o.doc._id||(o.doc._id=n.createUid()),o.base&&!o.base._id)throw new Error("Base needs _id");if(o.base&&o.base._id!==o.doc._id)throw new Error("Base needs same _id")}return[u,r,i]}},{"./MemoryDb":6,"./selector":7,async:11,bowser:12,lodash:"nJZoxB","sorted-object-array":14}],lodash:[function(e,t){t.exports=e("nJZoxB")},{}],nJZoxB:[function(e,t){t.exports=window._},{}],11:[function(e,t){(function(e){!function(){function n(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(r,arguments)}}var r,i,o={};r=this,null!=r&&(i=r.async),o.noConflict=function(){return r.async=i,o};var u=Object.prototype.toString,a=Array.isArray||function(e){return"[object Array]"===u.call(e)},c=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},s=function(e,t){if(e.map)return e.map(t);var n=[];return c(e,function(e,r,i){n.push(t(e,r,i))}),n},f=function(e,t,n){return e.reduce?e.reduce(t,n):(c(e,function(e,r,i){n=t(n,e,r,i)}),n)},l=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};"undefined"!=typeof e&&e.nextTick?(o.nextTick=e.nextTick,o.setImmediate="undefined"!=typeof setImmediate?function(e){setImmediate(e)}:o.nextTick):"function"==typeof setImmediate?(o.nextTick=function(e){setImmediate(e)},o.setImmediate=o.nextTick):(o.nextTick=function(e){setTimeout(e,0)},o.setImmediate=o.nextTick),o.each=function(e,t,r){function i(t){t?(r(t),r=function(){}):(o+=1,o>=e.length&&r())}if(r=r||function(){},!e.length)return r();var o=0;c(e,function(e){t(e,n(i))})},o.forEach=o.each,o.eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0,i=function(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1,r>=e.length?n():i())})};i()},o.forEachSeries=o.eachSeries,o.eachLimit=function(e,t,n,r){var i=p(t);i.apply(null,[e,n,r])},o.forEachLimit=o.eachLimit;var p=function(e){return function(t,n,r){if(r=r||function(){},!t.length||0>=e)return r();var i=0,o=0,u=0;!function a(){if(i>=t.length)return r();for(;e>u&&o<t.length;)o+=1,u+=1,n(t[o-1],function(e){e?(r(e),r=function(){}):(i+=1,u-=1,i>=t.length?r():a())})}()}},d=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[o.each].concat(t))}},h=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[p(e)].concat(n))}},m=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[o.eachSeries].concat(t))}},v=function(e,t,n,r){if(t=s(t,function(e,t){return{index:t,value:e}}),r){var i=[];e(t,function(e,t){n(e.value,function(n,r){i[e.index]=r,t(n)})},function(e){r(e,i)})}else e(t,function(e,t){n(e.value,function(e){t(e)})})};o.map=d(v),o.mapSeries=m(v),o.mapLimit=function(e,t,n,r){return y(t)(e,n,r)};var y=function(e){return h(e,v)};o.reduce=function(e,t,n,r){o.eachSeries(e,function(e,r){n(t,e,function(e,n){t=n,r(e)})},function(e){r(e,t)})},o.inject=o.reduce,o.foldl=o.reduce,o.reduceRight=function(e,t,n,r){var i=s(e,function(e){return e}).reverse();o.reduce(i,t,n,r)},o.foldr=o.reduceRight;var g=function(e,t,n,r){var i=[];t=s(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&i.push(e),t()})},function(){r(s(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};o.filter=d(g),o.filterSeries=m(g),o.select=o.filter,o.selectSeries=o.filterSeries;var b=function(e,t,n,r){var i=[];t=s(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||i.push(e),t()})},function(){r(s(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};o.reject=d(b),o.rejectSeries=m(b);var _=function(e,t,n,r){e(t,function(e,t){n(e,function(n){n?(r(e),r=function(){}):t()})},function(){r()})};o.detect=d(_),o.detectSeries=m(_),o.some=function(e,t,n){o.each(e,function(e,r){t(e,function(e){e&&(n(!0),n=function(){}),r()})},function(){n(!1)})},o.any=o.some,o.every=function(e,t,n){o.each(e,function(e,r){t(e,function(e){e||(n(!1),n=function(){}),r()
})},function(){n(!0)})},o.all=o.every,o.sortBy=function(e,t,n){o.map(e,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,t){if(e)return n(e);var r=function(e,t){var n=e.criteria,r=t.criteria;return r>n?-1:n>r?1:0};n(null,s(t.sort(r),function(e){return e.value}))})},o.auto=function(e,t){t=t||function(){};var n=l(e),r=n.length;if(!r)return t();var i={},u=[],s=function(e){u.unshift(e)},p=function(e){for(var t=0;t<u.length;t+=1)if(u[t]===e)return u.splice(t,1),void 0},d=function(){r--,c(u.slice(0),function(e){e()})};s(function(){if(!r){var e=t;t=function(){},e(null,i)}}),c(n,function(n){var r=a(e[n])?e[n]:[e[n]],u=function(e){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),e){var u={};c(l(i),function(e){u[e]=i[e]}),u[n]=r,t(e,u),t=function(){}}else i[n]=r,o.setImmediate(d)},h=r.slice(0,Math.abs(r.length-1))||[],m=function(){return f(h,function(e,t){return e&&i.hasOwnProperty(t)},!0)&&!i.hasOwnProperty(n)};if(m())r[r.length-1](u,i);else{var v=function(){m()&&(p(v),r[r.length-1](u,i))};s(v)}})},o.retry=function(e,t,n){var r=5,i=[];"function"==typeof e&&(n=t,t=e,e=r),e=parseInt(e,10)||r;var u=function(r,u){for(var a=function(e,t){return function(n){e(function(e,r){n(!e||t,{err:e,result:r})},u)}};e;)i.push(a(t,!(e-=1)));o.series(i,function(e,t){t=t[t.length-1],(r||n)(t.err,t.result)})};return n?u():u},o.waterfall=function(e,t){if(t=t||function(){},!a(e)){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();var r=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),u=e.next();u?i.push(r(u)):i.push(t),o.setImmediate(function(){e.apply(null,i)})}}};r(o.iterator(e))()};var $=function(e,t,n){if(n=n||function(){},a(t))e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.each(l(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}};o.parallel=function(e,t){$({map:o.map,each:o.each},e,t)},o.parallelLimit=function(e,t,n){$({map:y(t),each:p(t)},e,n)},o.series=function(e,t){if(t=t||function(){},a(e))o.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var n={};o.eachSeries(l(e),function(t,r){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[t]=i,r(e)})},function(e){t(e,n)})}},o.iterator=function(e){var t=function(n){var r=function(){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r};return t(0)},o.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var w=function(e,t,n,r){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){r(e,i)})};o.concat=d(w),o.concatSeries=m(w),o.whilst=function(e,t,n){e()?t(function(r){return r?n(r):(o.whilst(e,t,n),void 0)}):n()},o.doWhilst=function(e,t,n){e(function(r){if(r)return n(r);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?o.doWhilst(e,t,n):n()})},o.until=function(e,t,n){e()?n():t(function(r){return r?n(r):(o.until(e,t,n),void 0)})},o.doUntil=function(e,t,n){e(function(r){if(r)return n(r);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?n():o.doUntil(e,t,n)})},o.queue=function(e,t){function r(e,t,n,r){return e.started||(e.started=!0),a(t)||(t=[t]),0==t.length?o.setImmediate(function(){e.drain&&e.drain()}):(c(t,function(t){var i={data:t,callback:"function"==typeof r?r:null};n?e.tasks.unshift(i):e.tasks.push(i),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),o.setImmediate(e.process)}),void 0)}void 0===t&&(t=1);var i=0,u={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){r(u,e,!1,t)},kill:function(){u.drain=null,u.tasks=[]},unshift:function(e,t){r(u,e,!0,t)},process:function(){if(!u.paused&&i<u.concurrency&&u.tasks.length){var t=u.tasks.shift();u.empty&&0===u.tasks.length&&u.empty(),i+=1;var r=function(){i-=1,t.callback&&t.callback.apply(t,arguments),u.drain&&u.tasks.length+i===0&&u.drain(),u.process()},o=n(r);e(t.data,o)}},length:function(){return u.tasks.length},running:function(){return i},idle:function(){return u.tasks.length+i===0},pause:function(){u.paused!==!0&&(u.paused=!0,u.process())},resume:function(){u.paused!==!1&&(u.paused=!1,u.process())}};return u},o.cargo=function(e,t){var n=!1,r=[],i={tasks:r,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(e,n){a(e)||(e=[e]),c(e,function(e){r.push({data:e,callback:"function"==typeof n?n:null}),i.drained=!1,i.saturated&&r.length===t&&i.saturated()}),o.setImmediate(i.process)},process:function u(){if(!n){if(0===r.length)return i.drain&&!i.drained&&i.drain(),i.drained=!0,void 0;var o="number"==typeof t?r.splice(0,t):r.splice(0,r.length),a=s(o,function(e){return e.data});i.empty&&i.empty(),n=!0,e(a,function(){n=!1;var e=arguments;c(o,function(t){t.callback&&t.callback.apply(null,e)}),u()})}},length:function(){return r.length},running:function(){return n}};return i};var k=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&c(n,function(t){console[e](t)}))}]))}};o.log=k("log"),o.dir=k("dir"),o.memoize=function(e,t){var n={},r={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),u=i.pop(),a=t.apply(null,i);a in n?o.nextTick(function(){u.apply(null,n[a])}):a in r?r[a].push(u):(r[a]=[u],e.apply(null,i.concat([function(){n[a]=arguments;var e=r[a];delete r[a];for(var t=0,i=e.length;i>t;t++)e[t].apply(null,arguments)}])))};return i.memo=n,i.unmemoized=e,i},o.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},o.times=function(e,t,n){for(var r=[],i=0;e>i;i++)r.push(i);return o.map(r,t,n)},o.timesSeries=function(e,t,n){for(var r=[],i=0;e>i;i++)r.push(i);return o.mapSeries(r,t,n)},o.seq=function(){var e=arguments;return function(){var t=this,n=Array.prototype.slice.call(arguments),r=n.pop();o.reduce(e,n,function(e,n,r){n.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);r(e,t)}]))},function(e,n){r.apply(t,[e].concat(n))})}},o.compose=function(){return o.seq.apply(null,Array.prototype.reverse.call(arguments))};var O=function(e,t){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();return e(t,function(e,t){e.apply(n,r.concat([t]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};o.applyEach=d(O),o.applyEachSeries=m(O),o.forever=function(e,t){function n(r){if(r){if(t)return t(r);throw r}e(n)}n()},"undefined"!=typeof t&&t.exports?t.exports=o:"undefined"!=typeof define&&define.amd?define([],function(){return o}):r.async=o}()}).call(this,e("FWaASH"))},{FWaASH:13}],12:[function(e,t){!function(e,n){"undefined"!=typeof t&&t.exports?t.exports.browser=n():"function"==typeof define&&define.amd?define(n):this[e]=n()}("bowser",function(){function e(e){function n(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function r(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var i,o=n(/(ipod|iphone|ipad)/i).toLowerCase(),u=/like android/i.test(e),a=!u&&/android/i.test(e),c=n(/edge\/(\d+(\.\d+)?)/i),s=n(/version\/(\d+(\.\d+)?)/i),f=/tablet/i.test(e),l=!f&&/[^-]mobi/i.test(e);/opera|opr/i.test(e)?i={name:"Opera",opera:t,version:s||n(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(e)?(i={name:"Windows Phone",windowsphone:t},c?(i.msedge=t,i.version=c):(i.msie=t,i.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?i={name:"Internet Explorer",msie:t,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?i={name:"Microsoft Edge",msedge:t,version:c}:/chrome|crios|crmo/i.test(e)?i={name:"Chrome",chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:o?(i={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},s&&(i.version=s)):/sailfish/i.test(e)?i={name:"Sailfish",sailfish:t,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?i={name:"SeaMonkey",seamonkey:t,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(e)?(i={name:"Firefox",firefox:t,version:n(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(i.firefoxos=t)):/silk/i.test(e)?i={name:"Amazon Silk",silk:t,version:n(/silk\/(\d+(\.\d+)?)/i)}:a?i={name:"Android",version:s}:/phantom/i.test(e)?i={name:"PhantomJS",phantom:t,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?i={name:"BlackBerry",blackberry:t,version:s||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(e)?(i={name:"WebOS",webos:t,version:s||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(i.touchpad=t)):i=/bada/i.test(e)?{name:"Bada",bada:t,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(e)?{name:"Tizen",tizen:t,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||s}:/safari/i.test(e)?{name:"Safari",safari:t,version:s}:{name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(e)?(i.name=i.name||"Webkit",i.webkit=t,!i.version&&s&&(i.version=s)):!i.opera&&/gecko\//i.test(e)&&(i.name=i.name||"Gecko",i.gecko=t,i.version=i.version||n(/gecko\/(\d+(\.\d+)?)/i)),i.msedge||!a&&!i.silk?o&&(i[o]=t,i.ios=t):i.android=t;var p="";i.windowsphone?p=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o?(p=n(/os (\d+([_\s]\d+)*) like mac os x/i),p=p.replace(/[_\s]/g,".")):a?p=n(/android[ \/-](\d+(\.\d+)*)/i):i.webos?p=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?p=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?p=n(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(p=n(/tizen[\/\s](\d+(\.\d+)*)/i)),p&&(i.osversion=p);var d=p.split(".")[0];return f||"ipad"==o||a&&(3==d||4==d&&!l)||i.silk?i.tablet=t:(l||"iphone"==o||"ipod"==o||a||i.blackberry||i.webos||i.bada)&&(i.mobile=t),i.msedge||i.msie&&i.version>=10||i.chrome&&i.version>=20||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1?i.a=t:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6?i.c=t:i.x=t,i}var t=!0,n=e("undefined"!=typeof navigator?navigator.userAgent:"");return n.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in n)return!0}return!1},n._detect=e,n})},{}],13:[function(e,t){function n(){}var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],14:[function(e,t){function n(){var e=0;"object"!=typeof arguments[0]&&null!=arguments[0]?(this.key=arguments[0],e=1):this.key="id",this.array=[];for(var t=arguments.length;t>e;)this.insert(arguments[e++])}"object"==typeof t&&(t.exports=n),n.prototype.insert=function(e){var t=this.array,n=t.length;for(t.push(e);n;){var r=n,i=--n;if(this.getKey(r)<this.getKey(i)){var o=t[r];t[r]=t[i],t[i]=o}}return this},n.prototype.getKey=function(e){return this.array[e][this.key]},n.prototype.search=function(e){for(var t="object"==typeof e?e[this.key]:e,n=0,r=this.array,i=r.length;i>n;){var o=(i+n)/2>>>0,u=this.getKey(o);if(t>u)n=o+1;else{if(!(u>t))return o;i=o}}return-1},n.prototype.remove=function(e){var t=this.search(e);return t>=0&&this.array.splice(t,1),this}},{}]},{},[]);